import{v as x,_ as L,u as J,I as M,a as P,s as K,r as Q,b as Y,c as Z}from"./index.646dd0dd.js";/* empty css               */import{L as O}from"./index.4c44ef02.js";import{d as q,c as W,b9 as X,C as _,D as p,G as i,aI as e,aH as s,aM as ee,aJ as oe,aE as se,aL as l,ba as re,f as T,r as ne,bb as te,bc as ae,u as R,aK as b,aY as V,bd as U,be as N,bf as D,aZ as B,bg as F,bh as A,a_ as $,b7 as ie,b8 as le}from"./arco.db8b656f.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{f as de,g as ce}from"./vue.d8de27a3.js";import"./chart.30ec3212.js";/* empty css               */const ue="/static/main/assets/login-banner.426fb77f.png",me={class:"banner"},_e={class:"banner-inner"},ge={class:"carousel-title"},pe={class:"carousel-sub-title"},fe=["src"],he=q({__name:"banner",setup(o){const{t:n}=x.exports.useI18n(),v=W(()=>[{slogan:n("login.banner.slogan1"),subSlogan:n("login.banner.subSlogan1"),image:ue}]);return(y,r)=>{const u=re,f=X;return _(),p("div",me,[i("div",_e,[e(f,{class:"carousel","animation-name":"fade"},{default:s(()=>[(_(!0),p(ee,null,oe(v.value,t=>(_(),se(u,{key:t.slogan},{default:s(()=>[(_(),p("div",{key:t.slogan,class:"carousel-item"},[i("div",ge,l(t.slogan),1),i("div",pe,l(t.subSlogan),1),i("img",{class:"carousel-image",src:t.image},null,8,fe)]))]),_:2},1024))),128))]),_:1})])])}}});const be=L(he,[["__scopeId","data-v-405ab6a4"]]);function ve(o=!1){const n=T(o);return{loading:n,setLoading:r=>{n.value=r},toggle:()=>{n.value=!n.value}}}const ye={class:"login-form-wrapper"},we={class:"login-form-title"},Ie={class:"login-form-sub-title"},Ce={class:"login-form-error-msg"},Ve={class:"login-form-password-actions"},$e=q({__name:"login-form",setup(o){const n=de(),{t:v}=x.exports.useI18n(),y=T(""),{loading:r,setLoading:u}=ve(),f=J(),t=ce("login-config",{rememberPassword:!0,username:"",password:""}),d=ne({username:t.value.username,password:t.value.password}),w=async({errors:a,values:m})=>{if(!r.value&&!a){u(!0);try{await f.login(m);const{redirect:g,...I}=n.currentRoute.value.query;n.push({name:g||"usercenter",query:{...I}}),V.success(v("login.form.login.success"));const{rememberPassword:h}=t.value,{username:c,password:k}=m;t.value.username=h?c:"",t.value.password=h?k:""}catch(g){y.value=g.message}finally{u(!1)}}},C=a=>{t.value.rememberPassword=a};return(a,m)=>{const g=M,I=U,h=N,c=P,k=D,E=te,z=ae,j=B,G=F,H=A;return _(),p("div",ye,[i("div",we,l(a.$t("login.form.title")),1),i("div",Ie,l(a.$t("login.form.subtitle")),1),i("div",Ce,l(y.value),1),e(H,{ref:"loginForm",model:d,class:"login-form",layout:"vertical",onSubmit:w},{default:s(()=>[e(h,{field:"username",rules:[{required:!0,message:a.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(I,{modelValue:d.username,"onUpdate:modelValue":m[0]||(m[0]=S=>d.username=S),placeholder:a.$t("login.form.userName.placeholder")},{prefix:s(()=>[e(g)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(h,{field:"password",rules:[{required:!0,message:a.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(k,{modelValue:d.password,"onUpdate:modelValue":m[1]||(m[1]=S=>d.password=S),placeholder:a.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:s(()=>[e(c)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(G,{size:16,direction:"vertical"},{default:s(()=>[i("div",Ve,[e(E,{checked:"rememberPassword","model-value":R(t).rememberPassword,onChange:C},{default:s(()=>[b(l(a.$t("login.form.rememberPassword")),1)]),_:1},8,["model-value","onChange"]),e(z,null,{default:s(()=>[b(l(a.$t("login.form.forgetPassword")),1)]),_:1})]),e(j,{type:"primary","html-type":"submit",long:"",loading:R(r)},{default:s(()=>[b(l(a.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const Le=L($e,[["__scopeId","data-v-687d5a1f"]]),ke={name:"Registerform",data(){return{registerInfo:{username:"",password:"",email:"",code:""},sendVerifyCodeButtonType:"primary",sendVerifyCodeButtonText:"\u53D1\u9001\u9A8C\u8BC1\u7801",isSendingVerifyCode:!1,isRegistering:!1}},methods:{sendVerifyCode(){this.isSendingVerifyCode=!0,this.sendVerifyCodeButtonType==="primary"&&K({email:this.registerInfo.email}).then(o=>{this.isSendingVerifyCode=!1,this.sendVerifyCodeButtonType="dashed",this.sendVerifyCodeButtonText="\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001",V.success(o.data)}).catch(o=>{this.isSendingVerifyCode=!1,V.error(o.msg)})},register(){this.isRegistering=!0,Q({username:this.registerInfo.username,password:this.registerInfo.password,email:this.registerInfo.email,code:this.registerInfo.code}).then(o=>{this.isRegistering=!1,V.success(o.data),window.location.reload()}).catch(o=>{this.isRegistering=!1,V.error(o.msg)})}}};const Se={class:"login-form-wrapper"},Be={class:"login-form-title"},Fe={class:"login-form-sub-title"};function Re(o,n,v,y,r,u){const f=M,t=U,d=N,w=P,C=D,a=Y,m=Z,g=B,I=F,h=A;return _(),p("div",Se,[i("div",Be,l(o.$t("register.form.title")),1),i("div",Fe,l(o.$t("register.form.subtitle")),1),e(h,{ref:"registerForm",model:r.registerInfo,class:"login-form",layout:"vertical"},{default:s(()=>[e(d,{field:"username",rules:[{required:!0,message:o.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(t,{modelValue:r.registerInfo.username,"onUpdate:modelValue":n[0]||(n[0]=c=>r.registerInfo.username=c),placeholder:o.$t("login.form.userName.placeholder")},{prefix:s(()=>[e(f)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(d,{field:"password",rules:[{required:!0,message:o.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(C,{modelValue:r.registerInfo.password,"onUpdate:modelValue":n[1]||(n[1]=c=>r.registerInfo.password=c),placeholder:o.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:s(()=>[e(w)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(d,{field:"email",rules:[{required:!0,message:o.$t("register.form.email.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(t,{modelValue:r.registerInfo.email,"onUpdate:modelValue":n[2]||(n[2]=c=>r.registerInfo.email=c),placeholder:o.$t("register.form.email.placeholder")},{prefix:s(()=>[e(a)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),e(d,{field:"code",rules:[{required:!0,message:o.$t("register.form.code.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:s(()=>[e(I,null,{default:s(()=>[e(t,{modelValue:r.registerInfo.code,"onUpdate:modelValue":n[3]||(n[3]=c=>r.registerInfo.code=c),placeholder:o.$t("register.form.code.placeholder"),"allow-clear":""},{prefix:s(()=>[e(m)]),_:1},8,["modelValue","placeholder"]),e(g,{type:r.sendVerifyCodeButtonType,loading:r.isSendingVerifyCode,onClick:u.sendVerifyCode},{default:s(()=>[b(l(r.sendVerifyCodeButtonText),1)]),_:1},8,["type","loading","onClick"])]),_:1})]),_:1},8,["rules"]),e(I,{size:16,direction:"vertical"},{default:s(()=>[e(g,{type:"primary","html-type":"submit",long:"",loading:r.isRegistering,onClick:u.register},{default:s(()=>[b(l(o.$t("register.form.register")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])}const xe=L(ke,[["render",Re],["__scopeId","data-v-9540b112"]]),Me={name:"Login",components:{LoginFooter:O,LoginBanner:be,LoginForm:Le,RegisterForm:xe},data(){return{isLogin:!0}},methods:{gotoLogin(){this.isLogin=!0},gotoRegister(){console.log("gotoRegister"),this.isLogin=!1}}};const Pe=o=>(ie("data-v-8b2bd8cc"),o=o(),le(),o),qe={class:"container"},Te={class:"logo"},Ue=Pe(()=>i("div",{class:"logo-text"},"Image Builder",-1)),Ne={class:"content"},De={class:"content-inner"},Ae={key:0},Ee={key:1},ze={class:"footer"};function je(o,n,v,y,r,u){const f=F,t=$("LoginBanner"),d=$("LoginForm"),w=B,C=$("RegisterForm"),a=$("LoginFooter");return _(),p("div",qe,[i("div",Te,[e(f,null,{default:s(()=>[Ue]),_:1})]),e(t),i("div",Ne,[i("div",De,[r.isLogin?(_(),p("div",Ae,[e(d),e(w,{type:"text",long:"",class:"login-form-register-btn",onClick:u.gotoRegister},{default:s(()=>[b(l(o.$t("login.form.gotoregister")),1)]),_:1},8,["onClick"])])):(_(),p("div",Ee,[e(C),e(w,{type:"text",long:"",class:"login-form-register-btn",onClick:u.gotoLogin},{default:s(()=>[b(l(o.$t("login.form.gotologin")),1)]),_:1},8,["onClick"])]))]),i("div",ze,[e(a)])])])}const oo=L(Me,[["render",je],["__scopeId","data-v-8b2bd8cc"]]);export{oo as default};
